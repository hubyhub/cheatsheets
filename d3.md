## D3 Einführung

 1. [Säulendiagramm, mit dynamischen Säulen](#bar-chart1)
 2. [Säulendiagramm, mit SVG](#bar-chart2)

<a name="bar-chart1"></a>
###  1. Säulendiagramm, mit dynamischen Säulen###
```javascript
var dataset = [5, 10, 15, 17, 25];

d3.select('body').selectAll('div')
.data(dataset)
.enter()
.append('div')
.attr('class','bar')
.style('height', function(d){
 return d*5+'px';
});
```

#### Erklärung:
Der obige Code erzeugt ein simples Säulendiagramm basierend auf dem *dataset*-Array.

**selectAll('div'):** liefert ein Array von allen DIVs die gefunden werden können. Sind keine DIVs innerhalb des body-elements ist das Array leer. 

**data(dataSet, keyFunction)**:  definiert zum einen das **dataSet**-Array, zum anderen die **keyFunction** (optional).

**keyFunction** Die keyFunction bestimmt die Keys für die einzelnen Elemente des **dataSet**-Arrays. 
WIrd **keine** keyFunction angegeben, so sind die Keys automatisch die Indices des dataSet-Arrays. Für [5, 10, 15, 17, 25] wären es [0, 1, 2, 3, 4].
Danach werden die dataSet-Keys mit den Keys der Elemente der **selectAll**-Funktion verglichen. Alle data-keys die *unterschiedlich* sind, werden dann Teil der  **enter**-Selection und in der **enter()**-Funktion aufgerufen. 
Wären etwa 2 DIVs unterhalb vom body-Element vorhanden, dann bekämen diese die Indices [0,1]. 
Dann würde [0,1] mit [0,1,2,3,4] verglichen werden und nur die Datensets mit Index [2,3,4] in die Enter-Selection aufgenommen werden. 

**enter().append('div'):** Die enter().append() Funktion erzeugt dann so viele neue Nodes, wie es Elemente in der Enter-Selection gibt. In diesem Fall werden neue DIVs erzeugt. 

Siehe "[http://knowledgestockpile.blogspot.co.at/](http://knowledgestockpile.blogspot.co.at/2012/01/understanding-selectall-data-enter.html)"

**.attr('class', 'bar'):** damit erzeugt man ein Attribut für jedes Element. Z.B.: eine Klasse,... 

**.style('height', val):** jedem Element kann man nun *styles* geben.
z.B.:  würde `.style('height', '30px')` jedem DIV eine Höhe von 30px geben. Das funktioniert zwar, ist in den meisten Fällen nicht sehr nützlich, weil man ja die Daten des Datensets darstellen möchte. 
Das macht man indem man den String in eine Funktion ändert, der die einzelnen Daten-Werte **d** übergeben werden:
```javascript
.style('height', function(d){
	return d * 5 + 'px';
});
```
Dadurch erhält jede Säule ihre entsprechende Höhe aus dem Datensatz.

<a name="bar-chart2"></a>
###2. Säulendiagramm, mit SVG###
```javascript
var dataset = [5, 10, 15, 17, 25];
var svg = d3.select('#chartArea').append('svg')
		.attr('width', 400)
		.attr('width', 300); // bei SVG braucht man keine px angeben.

svg.selectAll('rect') 	// rect anstelle div
.data(dataset)
.enter()
.append('rect') 		// rect anstelle div
.attr('class','bar')
.attr('x', function(d, i){	// der 2. Parameter in den attr-Funktionen liefert den INDEX des Elements im Dataset.
return i* 22;				// Breite der Säule + bißchen mehr
})				
.attr('width', 20)
.attr('height', function(d){ // 'height' ist in SVG ein attr und kein style
 return d*5; //keine 'px'-Angabe notwendig in SVG
});
```

Styles für SVG-Elemente definiert man so wie bei HTML per CSS. Allerdings gibt es kleine Unterschiede. So definiert man etwa keine **background-color** sondern ein **fill**.

```css 
.bar{
display:inline-block;
width: 20px;
height:75px; // wird von D3 überschrieben
fill: teal;
}
```